MTREE(5)                    BSD File Formats Manual                   MTREE(5)

NNAAMMEE
     mmttrreeee -- format of mtree dir hierarchy files

DDEESSCCRRIIPPTTIIOONN
     The mmttrreeee format is a textual format that describes a collection of
     filesystem objects.  Such files are typically used to create or verify
     directory hierarchies.

   GGeenneerraall FFoorrmmaatt
     An mmttrreeee file consists of a series of lines, each providing information
     about a single filesystem object.  Leading whitespace is always ignored.

     When encoding file or pathnames, any backslash character or character
     outside of the 95 printable ASCII characters must be encoded as a a back-
     slash followed by three octal digits.  When reading mtree files, any
     appearance of a backslash followed by three octal digits should be con-
     verted into the corresponding character.

     Each line is interpreted independently as one of the following types:

     Blank       Blank lines are ignored.

     Comment     Lines beginning with ## are ignored.

     Special     Lines beginning with // are special commands that influence
                 the interpretation of later lines.

     Relative    If the first whitespace-delimited word has no // characters,
                 it is the name of a file in the current directory.  Any rela-
                 tive entry that describes a directory changes the current
                 directory.

     dot-dot     As a special case, a relative entry with the filename _._.
                 changes the current directory to the parent directory.
                 Options on dot-dot entries are always ignored.

     Full        If the first whitespace-delimited word has a // character
                 after the first character, it is the pathname of a file rela-
                 tive to the starting directory.  There can be multiple full
                 entries describing the same file.

     Some tools that process mmttrreeee files may require that multiple lines
     describing the same file occur consecutively.  It is not permitted for
     the same file to be mentioned using both a relative and a full file spec-
     ification.

   SSppeecciiaall ccoommmmaannddss
     Two special commands are currently defined:

     //sseett        This command defines default values for one or more keywords.
                 It is followed on the same line by one or more whitespace-
                 separated keyword definitions.  These definitions apply to
                 all following files that do not specify a value for that key-
                 word.

     //uunnsseett      This command removes any default value set by a previous //sseett
                 command.  It is followed on the same line by one or more key-
                 words separated by whitespace.

   KKeeyywwoorrddss
     After the filename, a full or relative entry consists of zero or more
     whitespace-separated keyword definitions.  Each such definition consists
     of a key from the following list immediately followed by an '=' sign and
     a value.  Software programs reading mtree files should warn about unrec-
     ognized keywords.

     Currently supported keywords are as follows:

     cckkssuumm       The checksum of the file using the default algorithm speci-
                 fied by the cksum(1) utility.

     ddeevviiccee      The device number for bblloocckk or cchhaarr file types.  The value
                 must be one of the following forms:

                 _f_o_r_m_a_t,_m_a_j_o_r,_m_i_n_o_r[,_s_u_b_u_n_i_t]
                       A device with _m_a_j_o_r, _m_i_n_o_r and optional _s_u_b_u_n_i_t fields.
                       Their meaning is specified by the operating's system
                       _f_o_r_m_a_t.  See below for valid formats.

                 _n_u_m_b_e_r
                       Opaque number (as stored on the file system).

                 The following values for _f_o_r_m_a_t are recognized: nnaattiivvee,
                 338866bbssdd, 44bbssdd, bbssddooss, ffrreeeebbssdd, hhppuuxx, iisscc, lliinnuuxx, nneettbbssdd, oossff11,
                 ssccoo, ssoollaarriiss, ssuunnooss, ssvvrr33, ssvvrr44, and uullttrriixx.

                 See mknod(8) for more details.

     ccoonntteennttss    The full pathname of a file that holds the contents of this
                 file.

     ffllaaggss       The file flags as a symbolic name.  See chflags(1) for infor-
                 mation on these names.  If no flags are to be set the string
                 ``none'' may be used to override the current default.

     ggiidd         The file group as a numeric value.

     ggnnaammee       The file group as a symbolic name.

     iiggnnoorree      Ignore any file hierarchy below this file.

     iinnooddee       The inode number.

     lliinnkk        The target of the symbolic link when type=link.

     mmdd55         The MD5 message digest of the file.

     mmdd55ddiiggeesstt   A synonym for mmdd55.

     mmooddee        The current file's permissions as a numeric (octal) or sym-
                 bolic value.

     nnlliinnkk       The number of hard links the file is expected to have.

     nnoocchhaannggee    Make sure this file or directory exists but otherwise ignore
                 all attributes.

     ooppttiioonnaall    The file is optional; do not complain about the file if it is
                 not in the file hierarchy.

     rreessddeevviiccee   The ``resident'' device number of the file, e.g. the ID of
                 the device that contains the file.  Its format is the same as
                 the one for ddeevviiccee.

     rriippeemmdd116600ddiiggeesstt
                 The RIPEMD160 message digest of the file.

     rrmmdd116600      A synonym for rriippeemmdd116600ddiiggeesstt.

     rrmmdd116600ddiiggeesstt
                 A synonym for rriippeemmdd116600ddiiggeesstt.

     sshhaa11        The FIPS 160-1 (``SHA-1'') message digest of the file.

     sshhaa11ddiiggeesstt  A synonym for sshhaa11.

     sshhaa225566      The FIPS 180-2 (``SHA-256'') message digest of the file.

     sshhaa225566ddiiggeesstt
                 A synonym for sshhaa225566.

     sshhaa338844      The FIPS 180-2 (``SHA-384'') message digest of the file.

     sshhaa338844ddiiggeesstt
                 A synonym for sshhaa338844.

     sshhaa551122      The FIPS 180-2 (``SHA-512'') message digest of the file.

     sshhaa551122ddiiggeesstt
                 A synonym for sshhaa551122.

     ssiizzee        The size, in bytes, of the file.

     ttiimmee        The last modification time of the file.

     ttyyppee        The type of the file; may be set to any one of the following:

                 bblloocckk       block special device
                 cchhaarr        character special device
                 ddiirr         directory
                 ffiiffoo        fifo
                 ffiillee        regular file
                 lliinnkk        symbolic link
                 ssoocckkeett      socket

     uuiidd         The file owner as a numeric value.

     uunnaammee       The file owner as a symbolic name.

SSEEEE AALLSSOO
     cksum(1), find(1), mtree(8)

BBUUGGSS
HHIISSTTOORRYY
     The mmttrreeee utility appeared in 4.3BSD-Reno.  The MD5 digest capability was
     added in FreeBSD 2.1, in response to the widespread use of programs which
     can spoof cksum(1).  The SHA-1 and RIPEMD160 digests were added in
     FreeBSD 4.0, as new attacks have demonstrated weaknesses in MD5.  The
     SHA-256 digest was added in FreeBSD 6.0.  Support for file flags was
     added in FreeBSD 4.0, and mostly comes from NetBSD.  The ``full'' entry
     format was added by NetBSD.

BSD                            September 4, 2013                           BSD
