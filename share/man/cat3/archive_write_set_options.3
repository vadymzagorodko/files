ARCHIVE_WRITE_OPTIONS(3) BSD Library Functions Manual ARCHIVE_WRITE_OPTIONS(3)

NNAAMMEE
     aarrcchhiivvee__wwrriittee__sseett__ffiilltteerr__ooppttiioonn, aarrcchhiivvee__wwrriittee__sseett__ffoorrmmaatt__ooppttiioonn,
     aarrcchhiivvee__wwrriittee__sseett__ooppttiioonn, aarrcchhiivvee__wwrriittee__sseett__ooppttiioonnss -- functions control-
     ling options for writing archives

LLIIBBRRAARRYY
     Streaming Archive Library (libarchive, -larchive)

SSYYNNOOPPSSIISS
     _i_n_t
     aarrcchhiivvee__wwrriittee__sseett__ffiilltteerr__ooppttiioonn(_s_t_r_u_c_t _a_r_c_h_i_v_e _*, _c_o_n_s_t _c_h_a_r _*_m_o_d_u_l_e,
         _c_o_n_s_t _c_h_a_r _*_o_p_t_i_o_n, _c_o_n_s_t _c_h_a_r _*_v_a_l_u_e);

     _i_n_t
     aarrcchhiivvee__wwrriittee__sseett__ffoorrmmaatt__ooppttiioonn(_s_t_r_u_c_t _a_r_c_h_i_v_e _*, _c_o_n_s_t _c_h_a_r _*_m_o_d_u_l_e,
         _c_o_n_s_t _c_h_a_r _*_o_p_t_i_o_n, _c_o_n_s_t _c_h_a_r _*_v_a_l_u_e);

     _i_n_t
     aarrcchhiivvee__wwrriittee__sseett__ooppttiioonn(_s_t_r_u_c_t _a_r_c_h_i_v_e _*, _c_o_n_s_t _c_h_a_r _*_m_o_d_u_l_e,
         _c_o_n_s_t _c_h_a_r _*_o_p_t_i_o_n, _c_o_n_s_t _c_h_a_r _*_v_a_l_u_e);

     _i_n_t
     aarrcchhiivvee__wwrriittee__sseett__ooppttiioonnss(_s_t_r_u_c_t _a_r_c_h_i_v_e _*, _c_o_n_s_t _c_h_a_r _*_o_p_t_i_o_n_s);

DDEESSCCRRIIPPTTIIOONN
     These functions provide a way for libarchive clients to configure spe-
     cific write modules.

     aarrcchhiivvee__wwrriittee__sseett__ffiilltteerr__ooppttiioonn(), aarrcchhiivvee__wwrriittee__sseett__ffoorrmmaatt__ooppttiioonn()
             Specifies an option that will be passed to currently-registered
             filters (including decompression filters) or format readers.

             If _o_p_t_i_o_n and _v_a_l_u_e are both NULL, these functions will do noth-
             ing and AARRCCHHIIVVEE__OOKK will be returned.  If _o_p_t_i_o_n is NULL but _v_a_l_u_e
             is not, these functions will do nothing and AARRCCHHIIVVEE__FFAAIILLEEDD will
             be returned.

             If _m_o_d_u_l_e is not NULL, _o_p_t_i_o_n and _v_a_l_u_e will be provided to the
             filter or reader named _m_o_d_u_l_e.  The return value will be either
             AARRCCHHIIVVEE__OOKK if the option was successfully handled or AARRCCHHIIVVEE__WWAARRNN
             if the option was unrecognized by the module or could otherwise
             not be handled.  If there is no such module, AARRCCHHIIVVEE__FFAAIILLEEDD will
             be returned.

             If _m_o_d_u_l_e is NULL, _o_p_t_i_o_n and _v_a_l_u_e will be provided to every
             registered module.  If any module returns AARRCCHHIIVVEE__FFAATTAALL, this
             value will be returned immediately.  Otherwise, AARRCCHHIIVVEE__OOKK will
             be returned if any module accepts the option, and AARRCCHHIIVVEE__FFAAIILLEEDD
             in all other cases.

     aarrcchhiivvee__wwrriittee__sseett__ooppttiioonn()
             Calls aarrcchhiivvee__wwrriittee__sseett__ffoorrmmaatt__ooppttiioonn(), then
             aarrcchhiivvee__wwrriittee__sseett__ffiilltteerr__ooppttiioonn().  If either function returns
             AARRCCHHIIVVEE__FFAATTAALL, AARRCCHHIIVVEE__FFAATTAALL will be returned immediately.  Oth-
             erwise, greater of the two values will be returned.

     aarrcchhiivvee__wwrriittee__sseett__ooppttiioonnss()
             _o_p_t_i_o_n_s is a comma-separated list of options.  If _o_p_t_i_o_n_s is NULL
             or empty, AARRCCHHIIVVEE__OOKK will be returned immediately.

             Individual options have one of the following forms:
             _o_p_t_i_o_n_=_v_a_l_u_e
                     The option/value pair will be provided to every module.
                     Modules that do not accept an option with this name will
                     ignore it.
             _o_p_t_i_o_n  The option will be provided to every module with a value
                     of ``1''.
             _!_o_p_t_i_o_n
                     The option will be provided to every module with a NULL
                     value.
             _m_o_d_u_l_e_:_o_p_t_i_o_n_=_v_a_l_u_e, _m_o_d_u_l_e_:_o_p_t_i_o_n, _m_o_d_u_l_e_:_!_o_p_t_i_o_n
                     As above, but the corresponding option and value will be
                     provided only to modules whose name matches _m_o_d_u_l_e.

OOPPTTIIOONNSS
     Filter gzip
             ccoommpprreessssiioonn--lleevveell
                     The value is interpreted as a decimal integer specifying
                     the gzip compression level.
     Filter xz
             ccoommpprreessssiioonn--lleevveell
                     The value is interpreted as a decimal integer specifying
                     the compression level.
     Format mtree
             cckkssuumm, ddeevviiccee, ffllaaggss, ggiidd, ggnnaammee, iinnddeenntt, lliinnkk, mmdd55, mmooddee, nnlliinnkk,
                     rrmmdd116600, sshhaa11, sshhaa225566, sshhaa338844, sshhaa551122, ssiizzee, ttiimmee, uuiidd,
                     uunnaammee
                     Enable a particular keyword in the mtree output.  Prefix
                     with an exclamation mark to disable the corresponding
                     keyword.  The default is equivalent to ``device, flags,
                     gid, gname, link, mode, nlink, size, time, type, uid,
                     uname''.
             aallll     Enables all of the above keywords.
             uussee--sseett
                     Enables generation of //sseett lines that specify default
                     values for the following files and/or directories.
             iinnddeenntt  XXX needs explanation XXX
     Format iso9660 - volume metadata
             These options are used to set standard ISO9660 metadata.
             aabbssttrraacctt--ffiillee=_f_i_l_e_n_a_m_e
                     The file with the specified name will be identified in
                     the ISO9660 metadata as holding the abstract for this
                     volume.  Default: none.
             aapppplliiccaattiioonn--iidd=_f_i_l_e_n_a_m_e
                     The file with the specified name will be identified in
                     the ISO9660 metadata as holding the application identi-
                     fier for this volume.  Default: none.
             bbiibblliioo--ffiillee=_f_i_l_e_n_a_m_e
                     The file with the specified name will be identified in
                     the ISO9660 metadata as holding the bibliography for this
                     volume.  Default: none.
             ccooppyyrriigghhtt--ffiillee=_f_i_l_e_n_a_m_e
                     The file with the specified name will be identified in
                     the ISO9660 metadata as holding the copyright for this
                     volume.  Default: none.
             ppuubblliisshheerr=_f_i_l_e_n_a_m_e
                     The file with the specified name will be identified in
                     the ISO9660 metadata as holding the publisher information
                     for this volume.  Default: none.
             vvoolluummee--iidd=_s_t_r_i_n_g
                     The specified string will be used as the Volume Identi-
                     fier in the ISO9660 metadata.  It is limited to 32 bytes.
                     Default: none.
     Format iso9660 - boot support
             These options are used to make an ISO9660 image that can be
             directly booted on various systems.
             bboooott=_f_i_l_e_n_a_m_e
                     The file matching this name will be used as the El Torito
                     boot image file.
             bboooott--ccaattaalloogg=_n_a_m_e
                     The name that will be used for the El Torito boot cata-
                     log.  Default: _b_o_o_t_._c_a_t_a_l_o_g
             bboooott--iinnffoo--ttaabbllee
                     The boot image file provided by the bboooott=_f_i_l_e_n_a_m_e option
                     will be edited with appropriate boot information in bytes
                     8 through 64.  Default: disabled
             bboooott--llooaadd--sseegg=_h_e_x_a_d_e_c_i_m_a_l_-_n_u_m_b_e_r
                     The load segment for a no-emulation boot image.
             bboooott--llooaadd--ssiizzee=_d_e_c_i_m_a_l_-_n_u_m_b_e_r
                     The number of "virtual" 512-byte sectors to be loaded
                     from a no-emulation boot image.  Some very old BIOSes can
                     only load very small images, setting this value to 4 will
                     often allow such BIOSes to load the first part of the
                     boot image (which will then need to be intelligent enough
                     to load the rest of itself).  This should not be needed
                     unless you are trying to support systems with very old
                     BIOSes.  This defaults to the full size of the image.
             bboooott--ttyyppee=_v_a_l_u_e
                     Specifies the boot semantics used by the El Torito boot
                     image: If the _v_a_l_u_e is ffdd, then the boot image is assumed
                     to be a bootable floppy image.  If the _v_a_l_u_e is hhdd, then
                     the boot image is assumed to be a bootable hard disk
                     image.  If the _v_a_l_u_e is nnoo--eemmuullaattiioonn, the boot image is
                     used without floppy or hard disk emulation.  If the boot
                     image is exactly 1.2MB, 1.44MB, or 2.88MB, then the
                     default is ffdd, otherwise the default is nnoo--eemmuullaattiioonn..
     Format iso9660 - filename and size extensions
             Various extensions to the base ISO9660 format.
             aallllooww--llddoottss
                     If enabled, allows filenames to begin with a leading
                     period.  If disabled, filenames that begin with a leading
                     period will have that period replaced by an underscore
                     character in the standard ISO9660 namespace.  This does
                     not impact names stored in the Rockridge or Joliet exten-
                     sion area.  Default: disabled.
             aallllooww--lloowweerrccaassee
                     If enabled, allows filenames to contain lowercase charac-
                     ters.  If disabled, filenames will be forced to upper-
                     case.  This does not impact names stored in the Rockridge
                     or Joliet extension area.  Default: disabled.
             aallllooww--mmuullttiiddoott
                     If enabled, allows filenames to contain multiple period
                     characters, in violation of the ISO9660 specification.
                     If disabled, additional periods will be converted to
                     underscore characters.  This does not impact names stored
                     in the Rockridge or Joliet extension area.  Default: dis-
                     abled.
             aallllooww--ppeerriioodd
                     If enabled, allows filenames to contain trailing period
                     characters, in violation of the ISO9660 specification.
                     If disabled,trailing periods will be converted to under-
                     score characters.  This does not impact names stored in
                     the Rockridge or Joliet extension area.  Default: dis-
                     abled.
             aallllooww--ppvvdd--lloowweerrccaassee
                     If enabled, the Primary Volume Descriptor may contain
                     lowercase ASCII characters, in violation of the ISO9660
                     specification.  If disabled, characters will be converted
                     to uppercase ASCII.  Default: disabled.
             aallllooww--sshhaarrpp--ttiillddee
                     If enabled, sharp and tilde characters will be permitted
                     in filenames, in violation if the ISO9660 specification.
                     If disabled, such characters will be converted to under-
                     score characters.  Default: disabled.
             aallllooww--vveerrnnuumm
                     If enabled, version numbers will be included with files.
                     If disabled, version numbers will be suppressed, in vio-
                     lation of the ISO9660 standard.  This does not impact
                     names stored in the Rockridge or Joliet extension area.
                     Default: enabled.
             iissoo--lleevveell
                     This enables support for file size and file name exten-
                     sions in the core ISO9660 area.  The name extensions
                     specified here do not affect the names stored in the
                     Rockridge or Joliet extension areas.
                     iissoo--lleevveell==11
                             The most compliant form of ISO9660 image.  File-
                             names are limited to 8.3 uppercase format, direc-
                             tory names are limited to 8 uppercase characters,
                             files are limited to 4 GiB, the complete ISO9660
                             image cannot exceed 4 GiB.
                     iissoo--lleevveell==22
                             Filenames are limited to 30 uppercase characters
                             with a 30-character extension, directory names
                             are limited to 30 characters, files are limited
                             to 4 GiB.
                     iissoo--lleevveell==33
                             As with iissoo--lleevveell==22, except that files may exceed
                             4 GiB.
                     iissoo--lleevveell==44
                             As with iissoo--lleevveell==33, except that filenames may be
                             up to 193 characters and may include arbitrary
                             8-bit characters.
             jjoolliieett  Microsoft's Joliet extensions store a completely separate
                     set of directory information about each file.  In partic-
                     ular, this information includes Unicode filenames of up
                     to 255 characters.  Default: enabled.
             lliimmiitt--ddeepptthh
                     If enabled, libarchive will use directory relocation
                     records to ensure that no pathname exceeds the ISO9660
                     limit of 8 directory levels.  If disabled, no relocation
                     will occur.  Default: enabled.
             lliimmiitt--ddiirrss
                     If enabled, libarchive will cause an error if there are
                     more than 65536 directories.  If disabled, there is no
                     limit on the number of directories.  Default: enabled
             ppaadd     If enabled, 300 kiB of zero bytes will be appended to the
                     end of the archive.  Default: enabled
             rreellaaxxeedd--ffiilleennaammeess
                     If enabled, all 7-bit ASCII characters are permitted in
                     filenames (except lowercase characters unless
                     aallllooww--lloowweerrccaassee is also specified).  This violates
                     ISO9660 standards.  This does not impact names stored in
                     the Rockridge or Joliet extension area.  Default: dis-
                     abled.
             rroocckkrriiddggee
                     The Rockridge extensions store an additional set of
                     POSIX-style file information with each file, including
                     mtime, atime, ctime, permissions, and long filenames with
                     arbitrary 8-bit characters.  These extensions also sup-
                     port symbolic links and other POSIX file types.  Default:
                     enabled.
     Format iso9660 - zisofs support
             The zisofs extensions permit each file to be independently com-
             pressed using a gzip-compatible compression.  This can provide
             significant size savings, but requires the reading system to have
             support for these extensions.  These extensions are disabled by
             default.
             ccoommpprreessssiioonn--lleevveell=number
                     The compression level used by the deflate compressor.
                     Ranges from 0 (least effort) to 9 (most effort).
                     Default: 6
             zziissooffss  Synonym for zziissooffss==ddiirreecctt.
             zziissooffss==ddiirreecctt
                     Compress each file in the archive.  Unlike
                     zziissooffss==iinnddiirreecctt, this is handled entirely within
                     libarchive and does not require a separate utility.  For
                     best results, libarchive tests each file and will store
                     the file uncompressed if the compression does not actu-
                     ally save any space.  In particular, files under 2k will
                     never be compressed.  Note that boot image files are
                     never compressed.
             zziissooffss==iinnddiirreecctt
                     Recognizes files that have already been compressed with
                     the mmkkzzffttrreeee utility and sets up the necessary file meta-
                     data so that readers will correctly identify these as
                     zisofs-compressed files.
             zziissooffss--eexxcclluuddee=_f_i_l_e_n_a_m_e
                     Specifies a filename that should not be compressed when
                     using zziissooffss==ddiirreecctt.  This option can be provided multi-
                     ple times to suppress compression on many files.
     Format zip
             ccoommpprreessssiioonn
                     The value is either ``store'' or ``deflate'' to indicate
                     how the following entries should be compressed.  Note
                     that this setting is ignored for directories, symbolic
                     links, and other special entries.
             eexxppeerriimmeennttaall
                     This boolean option enables or disables experimental Zip
                     features that may not be compatible with other Zip imple-
                     mentations.
             ffaakkeeccrrcc3322
                     This boolean option disables CRC calculations.  All CRC
                     fields are set to zero.  It should not be used except for
                     testing purposes.
             hhddrrcchhaarrsseett
                     This sets the character set used for filenames.
             zziipp6644   Zip64 extensions provide additional file size information
                     for entries larger than 4 GiB.  They also provide
                     extended file offset and archive size information when
                     archives exceed 4 GiB.  By default, the Zip writer selec-
                     tively enables these extensions only as needed.  In par-
                     ticular, if the file size is unknown, the Zip writer will
                     include Zip64 extensions to guard against the possibility
                     that the file might be larger than 4 GiB.

                     Setting this boolean option will force the writer to use
                     Zip64 extensions even for small files that would not oth-
                     erwise require them.  This is primarily useful for test-
                     ing.

                     Disabling this option with !!zziipp6644 will force the Zip
                     writer to avoid Zip64 extensions: It will reject files
                     with size greater than 4 GiB, it will reject any new
                     entries once the total archive size reaches 4 GiB, and it
                     will not use Zip64 extensions for files with unknown
                     size.  In particular, this can improve compatibility when
                     generating archives where the entry sizes are not known
                     in advance.

EEXXAAMMPPLLEESS
     The following example creates an archive write handle to create a gzip-
     compressed ISO9660 format image.  The two options here specify that the
     ISO9660 archive will use _k_e_r_n_e_l_._i_m_g as the boot image for El Torito boot-
     ing, and that the gzip compressor should use the maximum compression
     level.

           a = archive_write_new();
           archive_write_add_filter_gzip(a);
           archive_write_set_format_iso9660(a);
           archive_write_set_options(a, "boot=kernel.img,compression=9");
           archive_write_open_filename(a, filename, blocksize);

EERRRROORRSS
     More detailed error codes and textual descriptions are available from the
     aarrcchhiivvee__eerrrrnnoo() and aarrcchhiivvee__eerrrroorr__ssttrriinngg() functions.

SSEEEE AALLSSOO
     tar(1), libarchive(3), archive_read_set_options(3), archive_write(3)

HHIISSTTOORRYY
     The lliibbaarrcchhiivvee library first appeared in FreeBSD 5.3.

AAUUTTHHOORRSS
     The options support for libarchive was originally implemented by
     Michihiro NAKAJIMA.

BBUUGGSS
BSD                            February 2, 2012                            BSD
